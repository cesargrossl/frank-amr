import subprocess
import time

# === Configurações ===
# Usando GPIO BCM (não número físico!)
IN7 = 17   # Pino físico 11
IN8 = 27   # Pino físico 13

# Se o relé ligar invertido, troque ACTIVE_LOW para False
ACTIVE_LOW = True

# Função para executar gpioset
def gpioset(pin, value):
    level = 0 if (value and ACTIVE_LOW) else 1 if ACTIVE_LOW else (1 if value else 0)
    cmd = ['gpioset', '--mode=exit', 'gpiochip4', f'{pin}={level}']
    subprocess.run(cmd, check=True)

def relay_on(pin):
    gpioset(pin, True)

def relay_off(pin):
    gpioset(pin, False)

# === Teste simples ===
print("Ligando IN7 (GPIO17)")
relay_on(IN7)
time.sleep(2)

print("Desligando IN7, ligando IN8 (GPIO27)")
relay_off(IN7)
relay_on(IN8)
time.sleep(2)

print("Desligando IN8")
relay_off(IN8)
